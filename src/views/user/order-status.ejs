<div class="bg-transparent min-h-screen  flex items-center justify-center p-6">
  <div class="bg-white rounded-[2rem] shadow-lg max-w-3xl w-full p-12 animate-fade-in">

      <% if (status === 'success') { %>

          <div class="text-center mb-12">
              <div class="flex justify-center mb-6">
                  <div class="w-20 h-20 bg-black rounded-full flex items-center justify-center shadow-lg animate-scale-in">
                      <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                      </svg>
                  </div>
              </div>
              <h1 class="text-3xl font-bold text-gray-900 mb-3">Hei <%=user.firstName%> !</h1>
              <h1 class="text-3xl font-bold text-gray-900 mb-3">Your order is confirmed.</h1>
              <p class="text-lg text-gray-600">Order ID: <span class="font-semibold text-gray-900"><%= orders.orderNumber%></span></p>
          </div>

          <div class="bg-white border border-gray-200 rounded-2xl p-8 mb-8">
              <h2 class="text-lg font-bold text-gray-900 mb-6">Order Summary</h2>

              <div class="space-y-6">
                  <% if (orders && orders.items.length > 0) { %>
                      <% orders.items.forEach((order, index)=> { %>
                          <div class="flex gap-4 items-start">
                              <img src="<%= order.productImage %>"
                                   alt="<%= order.productName %>"
                                   class="w-16 h-16 object-cover rounded-lg bg-gray-100">
                              <div class="flex-1">
                                  <h3 class="font-semibold text-gray-900"><%= order.productName %></h3>
                                  <p class="text-sm text-gray-600 mt-1"><%= order.productColor || 'Default' %></p>
                              </div>
                              <p class="font-bold text-gray-900">₹<%=order.priceAtPurchase %></p>
                          </div>
                          <% if ( index < orders.items.length - 1) { %>
                              <div class="border-t border-gray-200"></div>
                          <% } %>
                      <% }); %>
                  <% } %>
              </div>

              <div class="border-t border-gray-200 mt-6 pt-6 flex justify-between">
                  <span class="font-bold text-gray-900">Total</span>
                  <span class="font-bold text-lg text-gray-900">₹<%= orders.total %></span>
              </div>
          </div>

          <div class="bg-gray-50 border border-gray-200 rounded-2xl p-8 mb-8">
              <p class="text-sm font-semibold text-gray-700 mb-4">Delivering to</p>
              <h3 class="text-lg font-bold text-gray-900 mb-2"><%= address.name %></h3>
              <p class="text-gray-700 mb-1"><%= address.houseName %>, <%= address.streetName %></p>
              <p class="text-gray-700 mb-4"><%= address.locality %>, <%= address.city %>, <%= address.state %> - <%= address.pincode %></p>
              <p class="text-gray-600 text-sm"><%= address.mobile %></p>
          </div>

          <div class="grid grid-cols-3 gap-4">
              <button onclick="goToHome()"
                      class="px-6 py-3 border-2 border-gray-300 text-gray-900 font-semibold rounded-lg hover:border-black hover:bg-gray-50 transition-all">
                  Back to Home
              </button>
              <button onclick="goToOrderDetails()"
                      class="px-6 py-3 bg-gray-100 text-gray-900 font-semibold rounded-lg hover:bg-gray-200 transition-all border border-gray-300">
                  Order Details
              </button>
              <button onclick="continueShopping()"
                      class="px-6 py-3 bg-black text-white font-semibold rounded-lg hover:bg-gray-800 transition-all">
                  Continue Shopping
              </button>
          </div>

      <% } else { %>

          <div class="text-center mb-12">
              <div class="flex justify-center mb-6">
                  <div class="w-20 h-20 bg-black rounded-full flex items-center justify-center shadow-lg animate-scale-in">
                      <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12" />
                      </svg>
                  </div>
              </div>

              <h1 class="text-3xl font-bold text-gray-900 mb-3">Oops! Payment failed</h1>
              <p class="text-lg text-gray-600 mb-8">Order ID: <span class="font-semibold text-gray-900"><%= orders._id %></span></p>

              <button onclick="retryPayment()"
                      class="inline-flex items-center gap-3 px-8 py-3 bg-black text-white font-semibold rounded-lg hover:bg-gray-800 transition-all hover:gap-4 group">
                  <svg class="w-5 h-5 animate-spin-slow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                  </svg>
                  <span>Try Again</span>
              </button>
          </div>

          <div class="bg-white border border-gray-200 rounded-2xl p-8 mb-8">
              <div class="flex justify-between items-center mb-6">
                  <h2 class="text-lg font-bold text-gray-900">Order Summary</h2>
                  <span class="text-sm font-semibold text-red-600">Failed</span>
              </div>

              <div class="space-y-6">
                  <% if (orders && orders.items.length > 0) { %>
                      <% orders.items.forEach((order, index)=> { %>
                          <div class="flex gap-4 items-start justify-between">
                              <div class="flex gap-4 items-start flex-1">
                                  <img src="<%= order.productImage %>"
                                       alt="<%= order.productName %>"
                                       class="w-16 h-16 object-cover rounded-lg bg-gray-100">
                                  <div>
                                      <h3 class="font-semibold text-gray-900"><%= order.productName %></h3>
                                      <p class="text-sm text-gray-600 mt-1"><%= order.productColor || 'Default' %></p>
                                  </div>
                              </div>
                              <div class="text-right">
                                  <p class="font-bold text-gray-900">₹<%= order.priceAtPurchase %></p>
                                  <p class="text-xs font-semibold text-red-600 mt-2">failed</p>
                              </div>
                          </div>
                          <% if (order.items.length > 1 && index < order.items.length - 1) { %>
                              <div class="border-t border-gray-200"></div>
                          <% } %>
                      <% }); %>
                  <% } %>
              </div>
          </div>

          <div class="grid grid-cols-2 gap-4">
              <button onclick="goToHome()"
                      class="px-6 py-3 border-2 border-gray-300 text-gray-900 font-semibold rounded-lg hover:border-black hover:bg-gray-50 transition-all">
                  Back to Home
              </button>
              <button onclick="cancelOrder()"
                      class="px-6 py-3 bg-gray-100 text-gray-900 font-semibold rounded-lg hover:bg-gray-200 transition-all border border-gray-300">
                  Cancel
              </button>
          </div>

      <% } %>
  </div>
</div>

<style>
  @keyframes fadeIn {
      from {
          opacity: 0;
      }
      to {
          opacity: 1;
      }
  }

  @keyframes scaleIn {
      from {
          transform: scale(0.8);
          opacity: 0;
      }
      to {
          transform: scale(1);
          opacity: 1;
      }
  }

  @keyframes spinSlow {
      from {
          transform: rotate(0deg);
      }
      to {
          transform: rotate(360deg);
      }
  }

  .animate-fade-in {
      animation: fadeIn 0.6s ease-out;
  }

  .animate-scale-in {
      animation: scaleIn 0.5s ease-out;
  }

  .animate-spin-slow {
      animation: spinSlow 2s linear infinite;
  }
</style>

<script>
function goToHome() {
  window.location.href = '/user';
}

function goToOrderDetails() {
  window.location.href = '/user/profile?show=orders';
}

function continueShopping() {
  window.location.href = '/user/products';
}

// function retryPayment() {
//   window.location.href = '/checkout?retry=true&orderId=';
// }

// function cancelOrder() {
//   if (confirm('Are you sure you want to cancel this order?')) {
//       window.location.href = '/';
//   }
// }
</script>
